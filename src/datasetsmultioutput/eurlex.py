from river.datasets import base
import stream


class Eurlex(base.RemoteDataset):
    """
    The EUR-Lex text collection is a collection of 19348 documents about European Union law. It contains many different types of documents, as treaties, legislation, case-law and legislative proposals, which are indexed according to several orthogonal categorization schemes to allow for multiple search facilities. The most important categorization is provided by the EUROVOC descriptors, which form a topic hierarchy with almost 4000 categories regarding different aspects of European law.

    Loza and Johannes FÃ¼rnkranz. Efficient Pairwise Multilabel Classification for Large-Scale Problems in the Legal Domain. In Proceedings of the European Conference on Machine Learning and Principles and Practice of Knowledge Disocvery in Databases (ECML-PKDD-2008), Part II, pages 50-65. 2008.
    """
    def __init__(self):
        super().__init__(
            task=base.MO_BINARY_CLF,
            n_samples=19348,
            n_features=5000,
            n_outputs=201,
            url="http://www.uco.es/grupos/kdis/MLLResources/ucobigfiles/Datasets/Full/Eurlex-sm_Meka.zip",
            unpack=True,
            filename="Eurlex-sm.arff",
            size=60_314_706,
        )

    def _iter(self):
        return stream.iter_arff(
            self.path,
            sparse=True,
            target=[
                "tag_external_relations",
                "tag_nuclear_common_market",
                "tag_transport",
                "tag_commercial_policy",
                "tag_environment",
                "tag_association",
                "tag_cooperation",
                "tag_common_customs_tariff",
                "tag_gatt",
                "tag_accession_to_agreement",
                "tag_european_investment_bank",
                "tag_provisions_under_article_235_eec",
                "tag_customs_union",
                "tag_accession",
                "tag_non-trade_agreement",
                "tag_health_protection",
                "tag_free_movement_of_goods",
                "tag_dissemination_of_information",
                "tag_african_caribbean_and_pacific_states",
                "tag_development_cooperation",
                "tag_sugar",
                "tag_fisheries_policy",
                "tag_wine",
                "tag_state_aids",
                "tag_loans_and_subsidies_-_ecsc",
                "tag_research_and_training",
                "tag_financial_provisions",
                "tag_agriculture",
                "tag_beef_and_veal",
                "tag_milk_products",
                "tag_technology",
                "tag_fruit_and_vegetables",
                "tag_industry",
                "tag_sheepmeat_and_goatmeat",
                "tag_cct_:_franchise",
                "tag_quotas_-_third_countries",
                "tag_harmonisation_of_customs_law_:_community_transit",
                "tag_health_and_safety",
                "tag_energy",
                "tag_cereals",
                "tag_european_free_trade_association_(efta)",
                "tag_harmonisation_of_customs_law_:_origin_of_goods",
                "tag_steel_industry",
                "tag_research_and_technological_development",
                "tag_tropical_timber",
                "tag_food_aid",
                "tag_community_transit_systems",
                "tag_textiles",
                "tag_provisions_governing_the_institutions",
                "tag_principles",
                "tag_objectives_and_tasks_of_the_treaties",
                "tag_european_political_cooperation",
                "tag_information_and_verification",
                "tag_scientific_and_technical_information_and_documentation",
                "tag_veterinary_legislation",
                "tag_rabbit_meat_and_farmed_game_meat",
                "tag_internal_market",
                "tag_processed_fruit_and_vegetables",
                "tag_quantitative_restrictions",
                "tag_electronic_data_processing",
                "tag_technical_barriers",
                "tag_european_development_fund",
                "tag_social_provisions",
                "tag_customs_procedures",
                "tag_pigmeat",
                "tag_common_customs_tariff_:_temporary_importation",
                "tag_oils_and_fats",
                "tag_eggs_and_poultry",
                "tag_state_monopolies_of_a_commercial_character",
                "tag_dumping",
                "tag_coal",
                "tag_steel",
                "tag_free_movement_of_persons",
                "tag_right_of_establishment",
                "tag_free_movement_of_capital",
                "tag_competition",
                "tag_industrial_and_commercial_property",
                "tag_education",
                "tag_vocational_training_and_youth",
                "tag_plant_health_legislation",
                "tag_foodstuffs",
                "tag_consumer_protection",
                "tag_free_movement_of_workers",
                "tag_social_security_for_migrant_workers",
                "tag_freedom_of_establishment_and_services",
                "tag_telecommunications",
                "tag_public_contracts_of_the_european_communities",
                "tag_provisions_implementing_article_95_-_ecsc",
                "tag_cocoa",
                "tag_safety_at_work_and_elsewhere",
                "tag_world_trade_organization",
                "tag_taxation",
                "tag_animal_feedingstuffs",
                "tag_agreements_and_concentrations_-_ecsc",
                "tag_rice",
                "tag_rubber",
                "tag_seeds_and_seedlings",
                "tag_customs_duties_:_suspensions",
                "tag_alcohol",
                "tag_preferential_systems",
                "tag_cct_:_derogations",
                "tag_human_rights",
                "tag_justice_and_home_affairs",
                "tag_assistance",
                "tag_culture",
                "tag_economic_and_monetary_union",
                "tag_rules_applying_to_undertakings",
                "tag_economic_policy",
                "tag_free_movement_of_services",
                "tag_small_and_medium-sized_enterprises",
                "tag_conjunctural_policy",
                "tag_budget",
                "tag_rules_of_origin",
                "tag_customs_duties_:_community_tariff_quotas",
                "tag_common_foreign_and_security_policy",
                "tag_monetary_policy",
                "tag_coffee",
                "tag_trans-european_networks",
                "tag_approximation_of_laws",
                "tag_tourism",
                "tag_tobacco",
                "tag_immigration_and_asylum_policy",
                "tag_social_policy",
                "tag_agricultural_structures",
                "tag_fuels",
                "tag_levies_and_loans_-_ecsc",
                "tag_financial_provisions_ecsc",
                "tag_prices_-_ecsc",
                "tag_dominant_position",
                "tag_balance_of_payments",
                "tag_supply_agency",
                "tag_security_system",
                "tag_overseas_countries_and_territories",
                "tag_french_overseas_departments",
                "tag_joint_undertakings",
                "tag_harmonisation_of_laws",
                "tag_protective_measures",
                "tag_quantitative_restrictions_and_measures_of_equivalent_effect",
                "tag_flax_and_hemp",
                "tag_eaggf",
                "tag_staff_regulations_and_employment_conditions_-_ec",
                "tag_privileges_and_immunities",
                "tag_harmonisation_of_customs_law_:_various",
                "tag_regional_policy",
                "tag_investments",
                "tag_non-annex_ii_eec_treaty_products",
                "tag_products_from_third_countries",
                "tag_free_circulation",
                "tag_value_added_tax",
                "tag_forestry",
                "tag_plants_and_flowers",
                "tag_own_resources",
                "tag_monetary_measures_in_the_field_of_agriculture",
                "tag_products_of_annex_ii_eec_treaty_and_regulation_no_827/68",
                "tag_charges_having_an_equivalent_effect",
                "tag_european_social_fund",
                "tag_general_provisions",
                "tag_hops",
                "tag_silkworms",
                "tag_hard_coal",
                "tag_eur_foundation_improvement_of_living_and_working_conditions",
                "tag_erdf",
                "tag_potatoes",
                "tag_dry_fodder",
                "tag_harmonisation_of_customs_law_:_inward_processing",
                "tag_harmonisation_of_customs_law_:_customs_territory",
                "tag_loans_contracted_by_the_ecsc",
                "tag_accession_compensatory_amounts",
                "tag_cotton",
                "tag_coordination_of_structural_instruments",
                "tag_adjustment",
                "tag_european_development_fund_(6)",
                "tag_harmonisation_of_customs_law_:_warehouses",
                "tag_free_zones",
                "tag_quotas_between_member_states",
                "tag_production_quotas_-_ecsc",
                "tag_european_development_fund_(5)",
                "tag_ore",
                "tag_economic_and_social_cohesion",
                "tag_integration_of_the_german_democratic_republic_(gdr)",
                "tag_rules_applying_to_undertakings_-_concentrations",
                "tag_european_monetary_institute",
                "tag_european_citizenship",
                "tag_common_organization_of_agricultural_markets",
                "tag_cohesion_fund",
                "tag_medium-sized_firms",
                "tag_distributive_trades_and_craft_industries",
                "tag_european_development_fund_(7)",
                "tag_peas_and_field_beans",
                "tag_european_system_of_central_banks",
                "tag_scrap",
                "tag_special_steels",
                "tag_european_central_bank",
                "tag_euro",
                "tag_customs_duties_:_national_tariff_quotas",
                "tag_customs_duties_:_speed-up_decisions",
                "tag_cork",
                "tag_brussels_convention_of_27_september_1968",
                "tag_customs_cooperation",
                "tag_concerted_practices",
                "tag_industrial_policy",
            ],
        )